"use strict";angular.module("cfWatchApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.tree","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cfWatchApp").controller("MainCtrl",["$scope","$http","GithubSearch",function(a,b,c){b.get("data/filter.json").then(function(b){a.list=b.data}),a.checkSubTree=function(b,d){d=!(void 0!==d&&d!==!1),angular.forEach(b.items,function(a){a.checked=d}),d&&(a.finalQuery=c.createQueryFromNodes(a.query,a.list))},a.searchLink=function(){return c.getGithubNormalSearchUrl()+c.createQueryFromNodes(a.query,a.list)},a.getRepoName=function(a){var b=new RegExp("http(s?)://github.com/([^/]*/[^/]*)/.*"),c=b.exec(a);return c[2]},a.getRepoUrl=function(b){return"https://github.com/"+a.getRepoName(b)},a.searchGithubByTypeAndPage=function(b,d){d=d||1,c.search(b,a.queryGithub,function(e){var f=null;f="repositories"===b?"Repo":"Issues",a.githubResults=1,a["page"+f]=1,a["githubResults"+f]=e.data,a["githubCurrentPage"+f]=d,a["githubResultsNb"+f]=c.nbPages(e)},d)},a.searchRepoByPage=function(b){a.searchGithubByTypeAndPage("repositories",b)},a.searchIssuesByPage=function(b){a.searchGithubByTypeAndPage("issues",b)},a.search=function(){a.queryGithub=c.createQueryFromNodes(a.query,a.list),a.searchRepoByPage(1),a.searchIssuesByPage(1)}}]),angular.module("cfWatchApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("cfWatchApp").factory("GithubSearch",["$resource",function(a){function b(){}function c(a,b){return void 0!==a.items&&a.items.length>0?void angular.forEach(a.items,function(a){c(a,b)}):void(void 0!==a.github&&a.checked&&angular.forEach(a.github,function(a){b.push(a)}))}var d="https://github.com/search?type=Repositories&ref=advsearch&q=",e=5,f=a("https://api.github.com/search/:type?q=:q",{type:"repositories",q:"",callback:"JSON_CALLBACK",per_page:e},{get:{method:"JSONP"}});return b.search=function(a,b,c,d){(void 0===d||null===d)&&(d=1),d=parseInt(d),f.get({type:a,q:b,page:d},c)},b.nbPages=function(a){return Math.ceil(a.data.total_count/e)},b.createQueryFromNodes=function(a,b){var d=[];angular.forEach(b,function(a){c(a,d)});var e=a;return angular.forEach(d,function(a){e+=" user:"+a}),e},b.getGithubNormalSearchUrl=function(){return d},b}]),angular.module("cfWatchApp").filter("makeRange",function(){return function(a){var b,c;switch(a.length){case 1:b=0,c=parseInt(a[0])-1;break;case 2:b=parseInt(a[0]),c=parseInt(a[1]);break;default:return a}for(var d=[],e=b;c>=e;e++)d.push(e);return d}});